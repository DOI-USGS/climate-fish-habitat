
<svg version="1.1" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800" height="600" onload="init(evt)" onmousemove="draw(evt)" onmouseup="deselect()" onmousedown="select(evt)">
        <style>
		text {
		  font-size: 20px;
		  cursor: default;
		  font-family: Tahoma, Geneva, sans-serif;
		}
		.noselect {
		  -webkit-touch-callout: none; /* iOS Safari */
		  -webkit-user-select: none;   /* Chrome/Safari/Opera */
		  -khtml-user-select: none;    /* Konqueror */
		  -moz-user-select: none;      /* Firefox */
		  -ms-user-select: none;       /* Internet Explorer/Edge */
		  user-select: none;           /* Non-prefixed version, currently
		                                  not supported by any browser */
		}
    .hidden {
      opacity:0.0;
    }  
    .disabled {
      opacity:0.3;
      cursor: default;
      pointer-events: none
    }
    .enabled {
      opacity:1.0;
      cursor: pointer;
    }
    
		.moveable{
			cursor: pointer;	
		}
		.locked {
			cursor: default;	
		}
    </style>
    <script type="text/ecmascript"><![CDATA[
        var svgDoc;
        var dotSpace = 20;
        var activeFish = "wally"
        var dots = [40,80,120,160,200,240,280,320,360,400,440,480,520];
        var selectedPoint = null;
        var drawnPoints = [];
        function init(evt) {
            if ( window.svgDocument == null ) {
                svgDoc = evt.target.ownerDocument;
                var mainDocument = window.parent.document;
            }  

            for (var i = 0; i < dots.length; i++) {
				var newW = document.createElementNS(document.rootElement.namespaceURI,"circle"); 
				newW.setAttributeNS(null, "cx", dots[i]);  
				newW.setAttributeNS(null, "cy", "0"); 
				newW.setAttributeNS(null, "class","disabled");
				newW.setAttributeNS(null, "r", 3);
				var newB = newW.cloneNode();
				newW.setAttributeNS(null, "id", "wally-"+i)
				newB.setAttributeNS(null, "id", "bass-"+i)
				svgDoc.getElementById("wally-dots").appendChild(newW);
				svgDoc.getElementById("bass-dots").appendChild(newB);
			}
			resetDefaults()
        };
  		function resetDefaults(){
  			for (var i = 0; i < dots.length; i++) {
  				svgDoc.getElementById("wally-"+i).setAttribute('class','hidden');
  			}
  			svgDoc.getElementById("start-over").setAttribute('class','disabled');
  			svgDoc.getElementById("im-done").setAttribute('class','disabled');
  			for (var i = 0; i < dots.length; i++) {
    			drawnPoints[i] = false;
			}
  			drawLine();
  		}

		function select(evt){
			selectedPoint = 1;
		}

        function imDone(){
        	svgDoc.getElementById('im-done').setAttribute('class','disabled');
        }
        
        function draw(evt){
        	if (selectedPoint === null) {return}
			for (var i = 0; i < dots.length; i++) {
				if (evt.clientX > dots[i]-dotSpace & evt.clientX <= dots[i]+dotSpace){
					svgDoc.getElementById(activeFish+"-"+[i]).setAttribute('class','enabled');
					svgDoc.getElementById(activeFish+"-"+[i]).setAttribute('cy',evt.clientY);
					drawnPoints[i]=true;
				}
			}
			drawLine();
        };

        function isFinished(){
        	for (var i = 0; i < dots.length; i++) {
        		if (drawnPoints[i] === false){
        			return false;
        		}
        	}
        	return true;
        }

        function drawLine(){
        	var path = "M0,0 ";
        	
        	for (var i = 0; i < dots.length; i++) {
        		var dotEl = svgDoc.getElementById(activeFish+"-"+[i]);
        		if (drawnPoints[i] & drawnPoints[i-1]){
        			path = path+"L"+dotEl.getAttribute('cx')+","+dotEl.getAttribute('cy')+" ";
        		} else {
        			path = path+"M"+dotEl.getAttribute('cx')+","+dotEl.getAttribute('cy')+" ";
        		}
        		
        	}
        	svgDoc.getElementById(activeFish + "-line").setAttribute('d',path);
        	
        }
		
		function newFish(){
			activeFish = 'bass'
			for (var i = 0; i < dots.length; i++) {
    			drawnPoints[i] = false;
			}
		}
        
        function deselect(){
            selectedPoint = null;
            if (isFinished()){
        		svgDoc.getElementById("im-done").setAttribute('class','enabled');
        		svgDoc.getElementById("im-done").setAttribute('onmousedown', 'newFish()')
        		newFish()
        	}
            for (var i = 0; i < dots.length; i++) {
            	if (svgDoc.getElementById(activeFish+"-"+i).getAttribute('class') === 'enabled'){
            		svgDoc.getElementById("start-over").setAttribute('class','enabled');
            		svgDoc.getElementById("start-over").setAttribute('onmousedown', 'resetDefaults()')
            		return
            	}
            }
        };
    
    ]]> </script>	
	
	<g id="wally-dots" fill='red'/>
	<g id="bass-dots" fill="#01b29F"/>
	<path fill='none' stroke='red' stroke-width="3" id="wally-line" />
	<path fill='none' stroke="#01b29F" stroke-width="3" id="bass-line" />
    <g id='buttons' transform="translate(400,540)">
		<g id='im-done' transform="translate(-180,0)">
      		<rect width="160" height="40" fill="#01b29F"/>
      		<text y="20" x="80" dy='0.33em' text-anchor='middle' class='noselect' fill="white">Finished</text>
      		<rect width="160" height="40" opacity="0"/>
    	</g>
   	 	<g id='start-over' transform="translate(20,0)" class='disabled'>
      		<rect width="160" height="40" fill="grey"/>
      		<text y="20" x="80" dy='0.33em' text-anchor='middle' class='noselect' fill="white">Reset</text>
      		<rect width="160" height="40" opacity="0"/>
    	</g>
    </g>
	<defs>
	    <linearGradient id="temperature" x1="0%" y1="0%" x2="0%" y2="100%">
	      <stop offset="0%" style="stop-color:rgb(200,60,50);stop-opacity:1"/>
	      <stop offset="50%" style="stop-color:rgb(240,230,125);stop-opacity:1"/>
		  <stop offset="90%" style="stop-color:rgb(28,105,180);stop-opacity:1"/>
	      <stop offset="100%" style="stop-color:rgb(28,105,180);stop-opacity:1"/>
	    </linearGradient>
		<filter id="gaus-blur">
			<feGaussianBlur stdDeviation="1" />
		</filter>
	  </defs>
</svg>