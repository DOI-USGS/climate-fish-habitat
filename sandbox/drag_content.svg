
<svg version="1.1" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="800" height="540" onload="init(evt)" onmousemove="drag(evt)" onmouseup="deselect()">
        <style>
        .point1{
            fill: #28A86B;
        }
        .point2{
            fill: #6495ED;
        }
		text {
		  font-size: 20px;
		  cursor: default;
		  font-family: Tahoma, Geneva, sans-serif;
		}
        .control_point{
            fill: #FFF;
            opacity: 0;
            stroke: #888;
            stroke-width: 2;
            cursor: pointer;
        }
		.moveable{
			cursor: move;	
		}
		.locked {
			cursor: default;	
		}
        .control_point:hover{
            opacity: 0.5;
        }
        .invisible{
            pointer-events: none;
        }
    </style>
    <script type="text/ecmascript"><![CDATA[
        var svgDoc;
        var selectedPoint = 0;
        var dx = 0;
        var dy = 0;
        
        var example_shape;
        var coords = [0, 0, 400, 300, 400, 200, 400, 100];
		var locked = [0, 0, 220, 200, 220, 40, 220, 380];
    	function lockPosition(evt, point){			
			evt.target.removeAttribute('onmousedown');
			evt.target.removeAttribute('onmouseup');
			var x = locked[point*2];
			var y = locked[point*2+1];
			var xo = coords[point*2];
			var yo = coords[point*2+1];
			if (Math.abs(yo-y) < 50){
				document.getElementById(point).setAttribute('fill','green');
			} else {
				if (yo < y){
					 document.getElementById(point).setAttribute('fill','rgb(200,60,50)');
				 } else {
					 document.getElementById(point).setAttribute('fill','rgb(28,105,180)');
				 }
			}
			sweepMove(evt.target.parentNode, x, y, xo, yo);
			evt.target.parentNode.setAttribute('class','locked');
		}
        function init(evt) {
            if ( window.svgDocument == null ) {
                svgDoc = evt.target.ownerDocument;
            }  
            example_shape = svgDoc.getElementById('example_shape');
        };
        
        function selectElement(evt, point){
            selectedPoint = point;
            control_point = evt.target.parentNode;
            dx = coords[selectedPoint*2] - evt.clientX;
            dy = coords[selectedPoint*2 + 1] - evt.clientY;
        };
        
        function drag(evt){
            if (selectedPoint === 0) { return; }
            var x = evt.clientX + dx;
            var y = evt.clientY + dy;
            coords[selectedPoint*2] = x;
            coords[selectedPoint*2 + 1] = y;
            
            control_point.setAttributeNS(null, "transform", "translate(" + x + "," + y + ")");
        };
        
		function sweepMove(evt, x, y, xo, yo){
			var i = 0;
			var numSteps = 20;
		    var sweepCount = setInterval(function () {   
		    	if (i < numSteps){
				var xnew = (x*(i+1)+xo*(numSteps-1-i))/numSteps;
				var ynew = (y*(i+1)+yo*(numSteps-1-i))/numSteps;
				evt.setAttributeNS(null, "transform", "translate(" + xnew + "," + ynew + ")");
				i++
				} else {
                   clearInterval(sweepCount);
				}}, 20);}
		
        function deselect(){
            selectedPoint = 0;
        }
    
    ]]> </script>
	<defs>
	    <linearGradient id="temperature" x1="0%" y1="0%" x2="0%" y2="100%">
	      <stop offset="0%" style="stop-color:rgb(200,60,50);stop-opacity:1" />
	      <stop offset="50%" style="stop-color:rgb(240,230,125);stop-opacity:1" />
	      <stop offset="100%" style="stop-color:rgb(28,105,180);stop-opacity:1"/>
	    </linearGradient>
	  </defs>
	
	<g id="thermometer">
		<path d="M50 50 v350 a50,50 0 1,0 60,0 v-350 a30,30 0 1,0 -60,0" fill="url(#temperature)" stroke="black"/>
	</g>
	
    <g transform="translate(400,100)" class='moveable'>
        <circle class="control_point" cx="0" cy="0" r="10"/>
		<path d="M80 0 a100,20 0 1,0 20,70z" fill="white" stroke='#01b29F' stroke-width='3' id='3'/>
		<text y='40'>Laker</text>
		<path d="M80 0 a100,20 0 1,0 20,70z" opacity='0' onmousedown="selectElement(evt, 3)"  onmouseup="lockPosition(evt,3)"/>
    </g>
	
    <g transform="translate(400,300)" class='moveable'>
        <circle class="control_point" cx="0" cy="0" r="10"/>
		<path d="M80 0 a100,20 0 1,0 20,70z" fill="white" stroke='#01b29F' stroke-width='3' id='1'/>
		<text y='40'>Wally</text>
		<path d="M80 0 a100,20 0 1,0 20,70z" opacity='0' onmousedown="selectElement(evt, 1)"  onmouseup="lockPosition(evt,1)"/>
    </g>
	
    <g transform="translate(400,200)" class='moveable'>
        <circle class="control_point" cx="0" cy="0" r="10"/>
		<path d="M80 0 a100,20 0 1,0 20,70z" fill="white" stroke='#01b29F' stroke-width='3' id='2'/>
		<text y='40'>Bass</text>
		<path d="M80 0 a100,20 0 1,0 20,70z" opacity='0' onmousedown="selectElement(evt, 2)"  onmouseup="lockPosition(evt,2)"/>
    </g>

</svg>